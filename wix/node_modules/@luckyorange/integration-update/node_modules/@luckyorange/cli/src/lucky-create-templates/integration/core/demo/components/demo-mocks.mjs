export default {
  model: {
    prop: 'mockOutput',
    event: 'mockCalled'
  },
  props: {
    mocks: Array,
    mockOutput: {}
  },
  mounted () {
    this.mocks.forEach(({ name, mock }) => {
      const mockFn = (...parameters) => {
        const mockReturn = mock.handler.apply(window, parameters)
        this.$emit('mockCalled', {
          name,
          value: mockReturn
        })
      }

      if (mock.target) {
        window[mock.target.property] = mock.target.value
        window[mock.target.property][mock.property] = mockFn
      } else {
        window[mock.property] = mockFn
      }
    })
  },
  template: `
    <section></section>
  `
}
