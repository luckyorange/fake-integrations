const readPkg = require('read-pkg')
const writePkg = require('write-pkg')

const pkg = readPkg.sync()

module.exports = [
  {
    title: 'Upgrade package debug script to support Windows [one time]',
    isNeeded () {
      return pkg?.scripts?.debug?.includes('node_modules/.bin/micro-dev')
    },
    async action () {
      pkg.scripts.debug = 'lucky start -- node --inspect node_modules/micro-dev/bin/micro-dev.js'
      await writePkg(pkg)
    }
  }
]
