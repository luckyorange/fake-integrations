const s = require('joi')

const schemas = {
  request: {
    action: s.string().required(),
    body: [s.object(), s.array()],
    forever: s.boolean().required(),
    id: s.string().allow(null),
    index: s.string().required(),
    siteId: s.string().allow(null),
    userId: s.string().allow(null),
    client: s.string().valid(['elasticsearch', 'elassandra'])
  }
}

module.exports = (data, schema) => s.validate(data, schemas[schema])
